/*! Bigfoot v.0.1.3 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){$.bigfoot.msg["ajax.authRequired"]="You need to login to continue.",$.bigfoot.msg["ajax.accessDenied"]="You have insufficient permissions to access the resource.",$.bigfoot.msg["ajax.failed"]="Your request could not be processed. Please contact technical support.",$.bigfoot.msg["ajax.tooLarge"]="Your request exceeds the size limit.",$.bigfoot.ajax={processResponse:function(a,b){$.bigfoot.notices.clear(),$.bigfoot.notices.addAll(a),a.redirect&&!b&&($.bigfoot.notices.stash(),window.location.replace(a.redirect))},processErrors:function(a){switch(a.status){case 0:return!0;case 401:$.bigfoot.notices.warn($.bigfoot.msg["ajax.authRequired"]);break;case 403:$.bigfoot.notices.error($.bigfoot.msg["ajax.accessDenied"]);break;case 413:$.bigfoot.notices.error($.bigfoot.msg["ajax.tooLarge"]);break;default:$.bigfoot.notices.error($.bigfoot.msg["ajax.failed"])}return!1}}},{}],2:[function(){$.bigfoot={settings:{},msg:{},log:function(a){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(a)},queue:[],init:function(a){this.queue.forEach(function(b){a.lookup(b.selector).each(b.fn)})},install:function(a,b){return this.queue.push({selector:a,fn:b}),this},installLast:this.install,installFirst:function(a,b){return this.queue.unshift({selector:a,fn:b}),this},installBefore:function(a,b,c){for(var d=0;d<this.queue.length&&this.queue[d].selector!=a;d++);return this.queue.splice(d,0,{selector:b,fn:c}),this},installAfter:function(a,b,c){for(var d=0;d<this.queue.length&&this.queue[d].selector!=a;d++);d==this.queue.length?this.installLast(b,c):this.queue.splice(d+1,0,{selector:b,fn:c})},replace:function(a,b){for(var c=0;c<this.queue.length&&this.queue[c].selector!=a;c++);c==this.queue.length?$.bigfoot.log("Replacing “"+a+"” failed. Try installing instead."):this.queue.splice(c,1,{selector:a,fn:b})}}},{}],3:[function(a){"use strict";!function(b){a("./jquery-ext"),a("./jquery-sha256"),a("./bigfoot"),a("./notices"),a("./viewport"),a("./ajax"),a("./ibox"),a("./components/commons"),a("./components/forms"),a("./components/switch"),a("./components/toggler"),a("./components/stashed"),a("./components/scroll-load"),a("./components/checkbox-toggle"),a("./components/retina"),a("./components/load-into"),a("./components/lightform"),b(function(){b.bigfoot.init(b("body"))})}(jQuery)},{"./ajax":1,"./bigfoot":2,"./components/checkbox-toggle":4,"./components/commons":5,"./components/forms":6,"./components/lightform":7,"./components/load-into":8,"./components/retina":9,"./components/scroll-load":10,"./components/stashed":11,"./components/switch":12,"./components/toggler":13,"./ibox":14,"./jquery-ext":15,"./jquery-sha256":16,"./notices":17,"./viewport":18}],4:[function(){$.bigfoot.install('input[type="checkbox"][data-toggle]',function(){function a(){"false"==localStorage.getItem(e)?c.removeAttr("checked"):"true"==localStorage.getItem(e)&&c.attr("checked","checked"),b(0)}function b(a){var b=c.is(":checked");localStorage.setItem(e,b);var f=$(d);b?f.fadeIn(a):f.fadeOut(a)}var c=$(this),d=c.attr("data-toggle"),e=c.attr("data-key")||"bigfoot.toggle("+d+")";a(),c.unbind(".bigfoot.toggle").bind("change.bigfoot.toggle",function(){b(300)})})},{}],5:[function(){$.bigfoot.placeholder=function(){return $('<div class="loading"/>')},$.bigfoot.install("[data-ref]",function(){var a=$(this).attr("data-ref"),b=$(this).attr("data-ref-class");b||(b="active"),$(a).addClass(b)}),$.bigfoot.install(".focus",function(){$(this).focus()}),$.bigfoot.install("[data-set-focus]",function(){$(this).unbind(".bigfoot.setFocus").bind("click.bigfoot.setFocus",function(){$($(this).attr("data-set-focus")).focus()})}),$.bigfoot.install('a[rel="popup"]',function(){$(this).unbind("click.bigfoot.popup").bind("click.bigfoot.popup",function(a){var b=$(this),c=b.attr("href");return c?($.bigfoot.ibox.load(c),a.preventDefault(),!1):void 0})}),$.bigfoot.install("[data-show]",function(){var a=$(this);a.unbind(".bigfoot.show").bind("click.bigfoot.show",function(){$(a.attr("data-show")).show(0,function(){$(a.attr("data-set-focus")).focus()})})}),$.bigfoot.install("[data-hide]",function(){$(this).unbind(".bigfoot.hide").bind("click.bigfoot.hide",function(){$($(this).attr("data-hide")).hide()})})},{}],6:[function(){"use strict";$.bigfoot.install("form",function(){var a=$(this);a.bind("submit.bigfoot.forms",function(b){return b.preventDefault(),a.hasClass("readonly")?!1:(this.submit(),!1)}),a[0].handlers=[],a[0].executeHandlers=function(b){for(var c in a[0].handlers){var d=a[0].handlers[c],e=d.call(a[0],{params:b});if(e===!1)return!1}return!0}}),$.bigfoot.install("form.partial",function(){var a=$(this),b=a.hasClass("stay"),c=a.attr("action"),d=a.attr("method").toUpperCase(),e="multipart/form-data"==a.attr("enctype");a[0].submit=function(){if(!a.hasClass("readonly")){var f=$.bigfoot.placeholder(),g=$(".submits",a),h=g.height();g.hide(),f.insertAfter(g),f.height(h);var i=new FormData(a[0]);if(e)$.bigfoot.log(d+" "+c+" [multipart data]");else{if(i=$(":not(.exclude)",a).serializeArray(),i.push({name:"__",value:(new Date).getTime().toString()}),!a[0].executeHandlers(i))return g.show(),f.remove(),void 0;$.bigfoot.log(d+" "+c+" "+JSON.stringify(i))}if("GET"==d){var j=c+"?"+$.param(i);$.bigfoot.viewport.navigate(j)}else{var k={data:i,dataType:"json",url:c,type:d,cache:!1,success:function(c){a.trigger("postSubmit",c),$.bigfoot.ajax.processResponse(c,b),c.redirect||(g.show(),f.remove(),$("input[type='password'], .cleanup",a).val(""))},error:function(a){g.show(),f.remove(),$.bigfoot.ajax.processErrors(a)}};e&&(k.processData=!1,k.contentType=!1),$.ajax(k)}}}}),$.bigfoot.install("form :input.submit",function(){var a=$(this);a.unbind(".bigfoot.submit").bind("change.bigfoot.submit",function(){var b=a.parents("form");b.submit()})}),$.bigfoot.install("form a.submit",function(){var a=$(this);a.unbind(".bigfoot.submit").bind("click.bigfoot.submit",function(b){return a.parents("form").submit(),b.preventDefault(),!1})}),$.bigfoot.install("form[data-load-into]",function(){var a=$(this),b=$(a.attr("data-load-into")),c=a.attr("method"),d=a.attr("action");a[0].submit=function(){var e=$.bigfoot.placeholder(),f=$(".submits",a);f.hide(),b.empty().append(e);var g=$(":not(.exclude)",a).serializeArray();return g.push({name:"__",value:(new Date).getTime().toString()}),a[0].executeHandlers(g)?($.bigfoot.log(c+" "+d+" "+JSON.stringify(g)),$.ajax({data:g,dataType:"html",url:d,type:c,success:function(c){a.trigger("postSubmit",c),e.remove(),b.append(c),$.bigfoot.init(b)},error:function(a){e.remove(),f.show(),$.bigfoot.ajax.processErrors(a)}}),void 0):(f.show(),e.remove(),void 0)}}),$.bigfoot.msg["form.unload.warn"]="Warning! If you leave this page, all unsaved changes will be lost.",$.bigfoot.msg["viewportUnload.warn"]="Warning! If you continue, all unsaved changed will be lost. Are you sure you want to continue?",$.bigfoot.install("form.unload-warn",function(){function a(){var a=$(":not(.exclude)",b).serialize();b.data("initial-state",a)}var b=$(this);a(),b.bind("submit.bigfoot.unload-warn",a),$(window).unbind("beforeunload.bigfoot").bind("beforeunload.bigfoot.unload-warn",function(){var a=$("form.unload-warn").filter(function(){var a=$(this),b=$(":not(.exclude)",a).serialize(),c=a.data("initial-state");return b!=c&&a.is(":visible")});return a.size()>0?$.bigfoot.msg["form.unload.warn"]:void 0}),$(window).unbind("viewportUnload.bigfoot").bind("viewportUnload.bigfoot.unload-warn",function(a){var b=$("form.unload-warn").filter(function(){var a=$(this),b=$(":not(.exclude)",a).serialize(),c=a.data("initial-state");return b!=c});b.size()>0&&(confirm($.bigfoot.msg["viewportUnload.warn"])||a.preventDefault())})})},{}],7:[function(){$.bigfoot.install("[data-method][data-action]",function(){var a=$(this),b=a.attr("data-method").toLowerCase(),c=a.attr("data-action");a.click(function(a){return a.preventDefault(),$.bigfoot.viewport.showStandBy(),$.ajax({dataType:"json",url:c,data:{__:(new Date).getTime().toString()},type:b,success:function(a){$.bigfoot.ajax.processResponse(a),a.redirect||$.bigfoot.viewport.hideStandBy()},error:function(a){$.bigfoot.ajax.processErrors(a),$.bigfoot.viewport.hideStandBy()}}),!1})})},{}],8:[function(){$.bigfoot.install("a[data-load-into]",function(){var a=$(this),b=a.attr("href"),c=$(a.attr("data-load-into"));if(c.size()>0&&b){var d=a.attr("data-classes"),e=a.attr("data-styles");a.click(function(a){a.preventDefault();var f=$.bigfoot.placeholder(),g=$(window).scrollTop();return c.empty().append(f),$.ajax({dataType:"html",url:b,data:{__:(new Date).getTime().toString()},type:"get",success:function(a){var c=$("<div/>");c.attr("data-loaded",b),c.attr("class",d),c.attr("style",e),c.append(a),f.replaceWith(c).remove(),$(window).scrollTop(g),$.bigfoot.init(c)},error:function(){f.remove()}}),!1})}})},{}],9:[function(){$.bigfoot.isRetina=function(){var a="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(a).matches},$.bigfoot.install("img.retina",function(){function a(){var a=b.width(),c=b.height();b.attr("src",b.attr("src").replace(/\.([^.]+)$/,"@2X.$1")),b.attr("width",a),b.attr("height",c)}var b=$(this);$.bigfoot.isRetina()&&(b[0].complete?a():b.one("load.bigfoot.retina",a))})},{}],10:[function(){$.bigfoot.install("[data-load]",function(){function a(){var a=b[0].tagName.toLowerCase(),f="<"+a+"></"+a+">",g=$(window).scrollTop()+$(window).height();if(b.offset().top<g){c.unbind(e);var h=$.bigfoot.placeholder(),i=b.attr("class"),j=b.attr("style");b.replaceWith(h).remove(),$.ajax({dataType:"html",url:d,data:{__:(new Date).getTime().toString()},type:"get",success:function(a){$.bigfoot.log("Loaded "+d);var b=$(f);b.attr("data-loaded",d),b.attr("class",i),b.attr("style",j),b.append(a),h.replaceWith(b).remove(),$.bigfoot.init(b)},error:function(){$.bigfoot.log("Failed to load "+d),h.remove()}})}}var b=$(this),c=$(b.attr("data-scroll-container")||window),d=b.attr("data-load"),e="scroll.bigfoot.scrollLoad-"+$.sha256(d);c.unbind(e).bind(e,a),$(a)})},{}],11:[function(){$.bigfoot.msg["changes.dirty"]="Changes not saved.",$.bigfoot.msg["changes.revert"]="Revert changes",$.bigfoot.install("textarea.stashed",function(){function a(){return g[0].__originalValue}function b(){return 1==g[0].__dirty}function c(){if(!b()){var a=$('<div class="dirty"></div>');a.text($.bigfoot.msg["changes.dirty"]);var c=$('<a href="javascript:;" class="revert"></a>');c.attr("title",$.bigfoot.msg["changes.revert"]),c.bind("click.bigfoot.autosave",f),a.append(c),g.after(a),g[0].__dirty=!0}}function d(){b()&&($("+ .dirty",g).remove(),g[0].__dirty=!1)}function e(){a()==g.val()?d():c()}function f(){g.val(a()),window.localStorage.removeItem(i),d()}var g=$(this),h=g.attr("id");if(h){g[0].__originalValue=g.val();var i=$.sha256(location.href.replace(/\?.*/g,""))+":"+h,j=window.localStorage.getItem(i);j&&(g.val(j),e()),g.unbind(".autosave").bind("keyup.bigfoot.autosave",function(){var b=g.val();b==a()?localStorage.removeItem(i):localStorage.setItem(i,b),e()});var k=g.parents("form");k&&k.bind("postSubmit.bigfoot.autosave",function(){window.localStorage.removeItem(i),g[0].__originalValue=g.val(),e()})}})},{}],12:[function(){$.bigfoot.switcher={hideAll:function(a){$(".switch-target").filter(function(){return this!=a}).hide(),$("[data-switch]").each(function(){var a=$(this),b=a.attr("data-switch-class");b||(b="active"),a.removeClass(b)})}},$(function(){$("html").bind("click.bigfoot.switcher",function(){$.bigfoot.switcher.hideAll()})}),$.bigfoot.install("[data-switch]",function(){function a(){if(e.is(":visible")){if(c.addClass(d),f){e.empty();var a=$.bigfoot.placeholder();e.append(a),$.bigfoot.log("[dropdown] GET "+f),$.ajax({dataType:"html",url:f,type:"get",success:function(b){a.remove(),e.append(b),$.bigfoot.init(e)},error:function(b){a.remove(),$.bigfoot.ajax.processErrors(b)}})}}else c.removeClass(d)}function b(){c.toggleClass(d),e.toggle(0,a)}var c=$(this),d=c.attr("data-switch-class");d||(d="active");var e=$(c.attr("data-switch"));e.addClass("switch-target");var f=e.attr("data-url");c.hasClass("switch-stay")&&e.click(function(a){a.stopPropagation()}),a(),c.bind("click.bigfoot.switch",function(){return $.bigfoot.switcher.hideAll(e[0]),b(),!1})})},{}],13:[function(){$.bigfoot.install(".toggler",function(){function a(){d.each(function(){var a=$(this),b=$(a.attr("data-for"));b.is(":visible")?a.addClass(e):a.removeClass(e)})}function b(){d.each(function(){$($(this).attr("data-for")).hide()})}var c=$(this),d=$("*[data-for]",c),e=c.attr("data-toggler-class");e||(e="active"),d.unbind(".bigfoot.toggler").bind("click.bigfoot.toggler",function(c){c.preventDefault();var d=$(this);return b(),$(d.attr("data-for")).show(),a(),!1});var f=d.filter("."+e);0==f.size()?a():(b(),$(f.attr("data-for")).show())})},{}],14:[function(){"use strict";$.bigfoot.msg.Close="Close",$.bigfoot.ibox={get:function(){return this.init(),$("#ibox")},init:function(){var a=this,b=$("#ibox");b.size()>0||(b=$('<div id="ibox"></div>'),b.hide(),$("body").prepend(b),$(window).unbind(".ibox").bind("keydown.ibox",function(b){27==b.keyCode&&a.close()}),b.bind("click.ibox",function(){a.close()}))},close:function(){var a=$("#ibox");$("iframe",a).remove(),a.fadeOut(300,function(){$(this).remove()})},isVisible:function(){return $("#ibox").is(":visible")},show:function(a){var b=this,c=$(a),d=$.Event("viewportUnload");if($(window).trigger(d),!d.isDefaultPrevented()){var e=this.get().empty(),f=$('<div id="ibox-wrapper"></div>');f.append(c),e.append(f);var g=$('<div id="ibox-close"></div>');g.attr("title",$.bigfoot.msg.Close),f.append(g),e.fadeIn(300,function(){$("body").animate({scrollTop:e.offset().top},300),e.trigger("ibox_load"),$.bigfoot.init(f),f.unbind(".ibox").bind("click.ibox",function(a){a.stopPropagation()}),$("a.close",c).add(g).bind("click.ibox",b.close)})}},load:function(a){var b=this;$.ajax({url:a,dataType:"html",type:"GET",data:{__:(new Date).getTime().toString()},success:function(a){b.show(a)},error:$.bigfoot.ajax.processErrors})}}},{}],15:[function(){$.fn.lookup=function(a){var b=this.find(a);return this.is(a)?b.add(this):b},$.fn.insertAt=function(a,b){var c=this.children().size();return 0>a&&(a=Math.max(0,c+1+a)),this.append(b),c>a&&this.children().eq(a).before(this.children().last()),this},$.fn.insertAtCaret=function(a){return this.each(function(){if(document.selection){this.focus();var b=document.selection.createRange();b.text=a,this.focus()}else if("undefined"!=typeof this.selectionStart){var c=this.selectionStart,d=this.selectionEnd,e=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(d,this.value.length),this.focus(),this.selectionStart=c+a.length,this.selectionEnd=c+a.length,this.scrollTop=e}else this.value+=a,this.focus()})},$.fn.scrollTo=function(){var a=-1;this.each(function(){a=$(this).offset().top}),a>=0&&$("html, body").animate({scrollTop:a},200)},$.fn.shuffle=function(){function a(a){return Math.floor(Math.random()*a)}var b=this.get(),c=$.map(b,function(){var c=a(b.length),d=$(b[c]).clone(!0)[0];return b.splice(c,1),d});return this.each(function(a){$(this).replaceWith($(c[a]))}),$(c)}},{}],16:[function(){!function(a){var b=8,c=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},d=function(a,b){return a>>>b|a<<32-b},e=function(a,b){return a>>>b},f=function(a,b,c){return a&b^~a&c},g=function(a,b,c){return a&b^a&c^b&c},h=function(a){return d(a,2)^d(a,13)^d(a,22)},i=function(a){return d(a,6)^d(a,11)^d(a,25)},j=function(a){return d(a,7)^d(a,18)^e(a,3)},k=function(a){return d(a,17)^d(a,19)^e(a,10)},l=function(a,b){var d,e,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var r=0;r<a.length;r+=16){d=w[0],e=w[1],l=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)x[s]=16>s?a[s+r]:c(c(c(k(x[s-2]),x[s-7]),j(x[s-15])),x[s-16]),t=c(c(c(c(q,i(n)),f(n,o,p)),v[s]),x[s]),u=c(h(d),g(d,e,l)),q=p,p=o,o=n,n=c(m,t),m=l,l=e,e=d,d=c(t,u);w[0]=c(d,w[0]),w[1]=c(e,w[1]),w[2]=c(l,w[2]),w[3]=c(m,w[3]),w[4]=c(n,w[4]),w[5]=c(o,w[5]),w[6]=c(p,w[6]),w[7]=c(q,w[7])}return w},m=function(a){for(var c=Array(),d=(1<<b)-1,e=0;e<a.length*b;e+=b)c[e>>5]|=(a.charCodeAt(e/b)&d)<<24-e%32;return c},n=function(a){for(var b="0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c},o=function(a,c){var d=m(a);d.length>16&&(d=core_sha1(d,a.length*b));for(var e=Array(16),f=Array(16),g=0;16>g;g++)e[g]=909522486^d[g],f[g]=1549556828^d[g];var h=l(e.concat(m(c)),512+c.length*b);return l(f.concat(h),768)},p=function(b){return b="object"==typeof b?a(b).val():b.toString()};a.extend({sha256:function(a){return a=p(a),n(l(m(a),a.length*b))},sha256hmac:function(a,b){return a=p(a),b=p(b),n(o(a,b))},sha256config:function(a){b=parseInt(a)||8}}),a.fn.sha256=function(b){a.sha256config(b);var c=p(a(this).val()),d=a.sha256(c);return a.sha256config(8),d}}(jQuery)},{}],17:[function(){$.bigfoot.notices={timeout:function(){var a=$.bigfoot.settings.notices||{};return a.timeout||1e4},container:function(){return $("#notices")},hasErrors:function(){return $(".notice.error:not(:animated)",this.container()).size()>0},stash:function(){if(window.sessionStorage){var a=this.container();$(".notice:animated",a).remove(),window.sessionStorage.setItem("bigfoot.notices",a.html()),a.empty()}return this},unstash:function(){var a=this;if(window.sessionStorage){var b=window.sessionStorage.getItem("bigfoot.notices");b&&(a.container().append(b),window.sessionStorage.removeItem("bigfoot.notices"),$(".notice",a.container()).each(function(){a.initElem(this)}))}return this},initElem:function(a){var b=this,c=$(a);$(".hide",c).remove();var d=$("<span class='hide'/>");d.bind("click.bigfoot.notices",function(){b.dispose(c)}),c.prepend(d),setTimeout(function(){b.dispose(c)},this.timeout())},mkElem:function(a){var b=a.kind,c=a.msg.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),d=$('<div class="notice '+b+'">'+c+"</div>");return this.initElem(d),d},add:function(a){return this.container().append(this.mkElem(a)),this},error:function(a){return this.add({kind:"error",msg:a})},warn:function(a){return this.add({kind:"warn",msg:a})},info:function(a){return this.add({kind:"info",msg:a})},addAll:function(a){if(a&&a.notices)for(var b in a.notices)this.add(a.notices[b]);return this},clear:function(){return this.dispose($(".notice",this.container()))},dispose:function(a){return a.fadeOut("fast",function(){$(this).remove()}),this}},window.addEventListener("keydown",function(a){27==a.keyCode&&$.bigfoot.notices.clear()}),$(function(){$.bigfoot.notices.unstash()})},{}],18:[function(){"use strict";$.bigfoot.msg.standby="Please wait...";var a="function"==typeof history.pushState;a&&$(function(){window.addEventListener("popstate",function(a){if(a.state){var b=a.state.id;b&&b==$.bigfoot.viewport.id()?load(location.href):location.reload(!0)}},!1)}),$.bigfoot.viewport={id:function(){var a=this.container(),b=a.attr("data-viewport-id");if(b)return b;var c=Math.random().toString();return a.attr("data-viewport-id",c),c},container:function(){return $("#viewport")},timeout:function(){var a=$.bigfoot.settings.viewport||{};return a.timeout||500},showStandBy:function(){var a=$("#viewport-standby");0==a.size()&&(a=$('<div id="viewport-standby"></div>'),a.hide(),a.append('<div class="message">'+$.bigfoot.msg.standby+"</div>")),$("body").append(a),this._standByTimer=setTimeout(function(){a.fadeIn(300)},this.timeout())},hideStandBy:function(){clearTimeout(this._standByTimer),$("#viewport-standby").remove()},load:function(a){var b=this,c=$.Event("viewportUnload");$(window).trigger(c),c.isDefaultPrevented()||(b.showStandBy(),$.ajax({url:a,headers:{"X-Render-Mode":"partial-viewport"},dataType:"html",data:{__:(new Date).getTime().toString()},type:"GET",success:function(a){var c=b.id(),d=$(a);"viewport"!=d.attr("id")&&(d=$('<div id="viewport"/>').append(d)),d.attr("data-viewport-id",c),b.hideStandBy(),b.container().replaceWith(d).remove(),$("a[rel='partial']").removeClass("active"),$.bigfoot.init(d);var e=d.attr("data-title");e&&$("head title").text(e),$("body").trigger("viewportLoad"),b.scrollToAnchor()},error:function(a){$.bigfoot.ajax.processErrors(a),b.hideStandBy()}}))},navigate:function(b,c){if(a){var d=$.bigfoot.viewport.id();window.history.replaceState({id:d},"",location.href),c?window.history.replaceState({id:d},"",b):window.history.pushState({id:d},"",b),this.load(b)}else $.bigfoot.notices.stash(),c?window.location.replace(b):window.location.href=b},scrollToAnchor:function(){var a=location.href.replace(/.*?(?=#|$)/,""),b=$(a);0==b.size()&&(b=$(".viewport-anchor").first()),b.scrollTo()}},a&&$.bigfoot.install("a[rel='partial']",function(){var a=$(this);"popup"!=a.attr("rel")&&"_blank"!=a.attr("target")&&(a.addClass("partial-link"),a.unbind(".bigfoot.partial-link").bind("click.bigfoot.partial-link",function(a){if(0!=a.button||a.metaKey||a.ctrlKey)return!0;a.preventDefault();var b=$(this).attr("href");return $.bigfoot.viewport.navigate(b),!1}))})},{}]},{},[3]);