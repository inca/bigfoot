/*! ScalpelJS v.0.2.1 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";b.exports=function(a){function b(b,c){a.scalpel.notices.clear(),a.scalpel.notices.addAll(b),b.redirect&&!c&&(a.scalpel.notices.stash(),window.location.replace(b.redirect))}function c(b){return 0==b.status?!0:(401==b.status?a.scalpel.notices.addWarn(a.msg["ajax.authRequired"]):502==b.status?a.scalpel.notices.addError(a.msg["ajax.serverDown"]):504==b.status?a.scalpel.notices.addError(a.msg["ajax.requestTimeout"]):403==b.status?a.scalpel.notices.addError(a.msg["ajax.accessDenied"]):a.scalpel.notices.addError(a.msg["ajax.failed"]),!1)}a.msg["ajax.authRequired"]="You need to login to continue.",a.msg["ajax.serverDown"]="Server is down for scheduled maintenance.",a.msg["ajax.requestTimeout"]="Request took too long to process. Please try again soon.",a.msg["ajax.accessDenied"]="You have insufficient permissions to access the resource.",a.msg["ajax.failed"]="Your request could not be processed. Please contact technical support.";var d=["text","checkbox","radio","select","textarea","date"];return{processResponse:b,processErrors:c,inputTypes:d}}(jQuery)},{}],2:[function(a){"use strict";a("./jquery-ext"),a("./jquery-sha256"),$.scalpel=a("./scalpel"),$.msg=$.scalpel.msg,$.scalpel.notices=a("./notices"),$.scalpel.viewport=a("./viewport"),$.scalpel.ajax=a("./ajax"),$.scalpel.ibox=a("./ibox"),a("./components/commons"),a("./components/forms"),a("./components/switch"),a("./components/toggler"),a("./components/stashed"),a("./components/scroll-load"),a("./components/checkbox-toggle"),$(function(){$.scalpel.init($("body"))})},{"./ajax":1,"./components/checkbox-toggle":3,"./components/commons":4,"./components/forms":5,"./components/scroll-load":6,"./components/stashed":7,"./components/switch":8,"./components/toggler":9,"./ibox":10,"./jquery-ext":11,"./jquery-sha256":12,"./notices":13,"./scalpel":14,"./viewport":15}],3:[function(a,b){"use strict";b.exports=function(a){a.scalpel.queue['input[type="checkbox"][data-toggle]']=function(){function b(){"false"==localStorage.getItem(f)&&d.removeAttr("checked"),c(0)}function c(b){var c=d.is(":checked");localStorage.setItem(f,c);var g=a(e);c?g.fadeIn(b):g.fadeOut(b)}var d=a(this),e=d.attr("data-toggle"),f=d.attr("data-key")||"scalpel.toggle("+e+")";b(),d.unbind(".scalpel.toggle").bind("change.scalpel.toggle",function(){c(300)})}}(jQuery)},{}],4:[function(a,b){"use strict";b.exports=function(a){a.scalpel.placeholder=function(){return a('<div class="loading"/>')},a.scalpel.queue["[data-ref]"]=function(){var b=a(this).attr("data-ref"),c=a(this).attr("data-ref-class");c||(c="active"),a(b).addClass(c)},a.scalpel.queue[".focus"]=function(){a(this).focus()},a.scalpel.queue["[data-set-focus]"]=function(){a(this).unbind(".scalpel.setFocus").bind("click.scalpel.setFocus",function(){a(a(this).attr("data-set-focus")).focus()})},a.scalpel.queue['a[rel="popup"]']=function(){a(this).unbind("click.scalpel.popup").bind("click.scalpel.popup",function(b){var c=a(this),d=c.attr("href");return d?(a.scalpel.ibox.load(d),b.preventDefault(),!1):void 0})},a.scalpel.queue["[data-show]"]=function(){a(this).unbind(".scalpel.show").bind("click.scalpel.show",function(){a(a(this).attr("data-show")).show()})},a.scalpel.queue["[data-hide]"]=function(){a(this).unbind(".scalpel.hide").bind("click.scalpel.hide",function(){a(a(this).attr("data-hide")).hide()})}}(jQuery)},{}],5:[function(a,b){"use strict";b.exports=function(a){a.scalpel.queue.form=function(){var b=a(this);b.bind("submit.scalpel.forms",function(a){return a.preventDefault(),b.hasClass("readonly")?!1:(this.submit(),!1)}),b[0].handlers=[],b[0].executeHandlers=function(a){for(var c in b[0].handlers){var d=b[0].handlers[c],e=d.call(b[0],{params:a});if(e===!1)return!1}return!0}},a.scalpel.queue["form.partial"]=function(){var b=a(this),c=b.hasClass("stay"),d=b.attr("action"),e=b.attr("method").toUpperCase(),f="multipart/form-data"==b.attr("enctype");b[0].submit=function(){if(!b.hasClass("readonly")){var g=a.scalpel.placeholder(),h=a(".submits",b),i=h.height();h.hide(),g.insertAfter(h),g.height(i);var j=b[0];if(f)a.scalpel.log(e+" "+d+" [multipart data]");else{if(j=a(":not(.exclude)",b).serializeArray(),j.push({name:"__",value:(new Date).getTime().toString()}),!b[0].executeHandlers(j))return h.show(),g.remove(),void 0;a.scalpel.log(e+" "+d+" "+JSON.stringify(j))}if("GET"==e){var k=d+"?"+a.param(j);a.scalpel.viewport.navigate(k)}else{var l={data:j,dataType:"json",url:d,type:e,cache:!1,success:function(d){b.trigger("postSubmit",d),a.scalpel.ajax.processResponse(d,c),h.show(),g.remove(),a("input[type='password'], .cleanup",b).val("")},error:function(b){h.show(),g.remove(),a.scalpel.ajax.processErrors(b)}};f&&(l.processData=!1,l.contentType=!1),a.ajax(l)}}}},a.scalpel.queue["form :input.submit"]=function(){var b=a(this);b.unbind(".scalpel.submit").bind("change.scalpel.submit",function(){var a=b.parents("form");a.submit()})},a.scalpel.queue["form a.submit"]=function(){var b=a(this);b.unbind(".scalpel.submit").bind("click.scalpel.submit",function(a){return b.parents("form").submit(),a.preventDefault(),!1})},a.scalpel.queue["form[data-load-into]"]=function(){var b=a(this),c=a(b.attr("data-load-into")),d=b.attr("method"),e=b.attr("action");b[0].submit=function(){var f=a.scalpel.placeholder(),g=a(".submits",b);g.hide(),c.empty().append(f);var h=a(":not(.exclude)",b).serializeArray();return h.push({name:"__",value:(new Date).getTime().toString()}),b[0].executeHandlers(h)?(a.scalpel.log(d+" "+e+" "+JSON.stringify(h)),a.ajax({data:h,dataType:"html",url:e,type:d,success:function(d){b.trigger("postSubmit",d),f.remove(),c.append(d),a.scalpel.init(c)},error:function(b){f.remove(),g.show(),a.scalpel.ajax.processErrors(b)}}),void 0):(g.show(),f.remove(),void 0)}},a.msg["form.unload.warn"]="Warning! If you leave this page, all unsaved changes will be lost.",a.msg["viewportUnload.warn"]="Warning! If you continue, all unsaved changed will be lost. Are you sure you want to continue?",a.scalpel.queue["form.unload-warn"]=function(){function b(){var b=a(":not(.exclude)",c).serialize();c.data("initial-state",b)}var c=a(this);b(),c.bind("submit.scalpel.unload-warn",b),a(window).unbind("beforeunload.scalpel").bind("beforeunload.scalpel.unload-warn",function(){var b=a("form.unload-warn").filter(function(){var b=a(this),c=a(":not(.exclude)",b).serialize(),d=b.data("initial-state");return c!=d&&b.is(":visible")});return b.size()>0?a.msg["form.unload.warn"]:void 0}),a(window).unbind("viewportUnload.scalpel").bind("viewportUnload.scalpel.unload-warn",function(b){var c=a("form.unload-warn").filter(function(){var b=a(this),c=a(":not(.exclude)",b).serialize(),d=b.data("initial-state");return c!=d});c.size()>0&&(confirm(a.msg["viewportUnload.warn"])||b.preventDefault())})}}(jQuery)},{}],6:[function(a,b){"use strict";b.exports=function(a){a.scalpel.queue["[data-load]"]=function(){function b(){if(c){var b=a(window).scrollTop()+a(window).height();if(c.offset().top<b){var d=a.scalpel.placeholder(),f=c.attr("class"),g=c.attr("style");c.replaceWith(d).remove(),c=null,a.ajax({dataType:"html",url:e,data:{__:(new Date).getTime().toString()},type:"get",success:function(b){a.scalpel.log("Loaded "+e);var c=a("<div/>");c.attr("data-loaded",e),c.attr("class",f),c.attr("style",g),c.append(b),d.replaceWith(c).remove(),a.scalpel.init(c)},error:function(){a.scalpel.log("Failed to load "+e),d.remove()}})}}}var c=a(this),d=a(c.attr("data-scroll-container")||window),e=c.attr("data-load");d.unbind(".scalpel.scrollLoad").bind("scroll.scalpel.scrollLoad",b),a(b)}}(jQuery)},{}],7:[function(a,b){"use strict";b.exports=function(a){a.msg["changes.dirty"]="Changes not saved.",a.msg["changes.revert"]="Revert changes",a.scalpel.queue["textarea.stashed"]=function(){function b(){return h[0].__originalValue}function c(){return 1==h[0].__dirty}function d(){if(!c()){var b=a('<div class="dirty"></div>');b.text(a.msg["changes.dirty"]);var d=a('<a href="javascript:;" class="revert"></a>');d.attr("title",a.msg["changes.revert"]),d.bind("click.scalpel.autosave",g),b.append(d),h.after(b),h[0].__dirty=!0}}function e(){c()&&(a("+ .dirty",h).remove(),h[0].__dirty=!1)}function f(){b()==h.val()?e():d()}function g(){h.val(b()),window.localStorage.removeItem(j),e()}var h=a(this),i=h.attr("id");if(i){h[0].__originalValue=h.val();var j=a.sha256(location.href.replace(/\?.*/g,""))+":"+i,k=window.localStorage.getItem(j);k&&(h.val(k),f()),h.unbind(".autosave").bind("keyup.scalpel.autosave",function(){var a=h.val();a==b()?localStorage.removeItem(j):localStorage.setItem(j,a),f()});var l=h.parents("form");l&&l.bind("postSubmit.scalpel.autosave",function(){window.localStorage.removeItem(j),h[0].__originalValue=h.val(),f()})}}}(jQuery)},{}],8:[function(a,b){"use strict";b.exports=function(a){a.scalpel.switcher=function(){function b(){a(".switch-target").hide(),a("[data-switch]").each(function(){var b=a(this),c=b.attr("data-switch-class");c||(c="active"),b.removeClass(c)})}return a(function(){a("html").bind("click.scalpel.switch",function(){b()})}),{hideAll:b}}(),a.scalpel.queue["[data-switch]"]=function(){function b(){if(f.is(":visible")){if(d.addClass(e),g){f.empty();var b=a.scalpel.placeholder();f.append(b),a.scalpel.log("[dropdown] GET "+g),a.ajax({dataType:"html",url:g,type:"get",success:function(c){b.remove(),f.append(c),a.scalpel.init(f)},error:function(c){b.remove(),a.scalpel.ajax.processErrors(c)}})}}else d.removeClass(e)}function c(){d.toggleClass(e),f.toggle(0,b)}var d=a(this),e=d.attr("data-switch-class");e||(e="active");var f=a(d.attr("data-switch"));f.addClass("switch-target");var g=f.attr("data-url");d.hasClass("switch-stay")&&f.click(function(a){a.stopPropagation()}),b(),d.bind("click.scalpel.switch",function(){return a.scalpel.switcher.hideAll(),c(),!1})}}(jQuery)},{}],9:[function(a,b){"use strict";b.exports=function(a){a.scalpel.queue[".toggler"]=function(){function b(){d.each(function(){var b=a(this),c=a(b.attr("data-for"));c.is(":visible")?b.addClass(e):b.removeClass(e)})}var c=a(this),d=a("*[data-for]",c),e=c.attr("data-toggler-class");e||(e="active"),d.unbind(".scalpel.toggler").bind("click.scalpel.toggler",function(c){c.preventDefault();var e=a(this);return d.each(function(){a(a(this).attr("data-for")).hide()}),a(e.attr("data-for")).show(),b(),!1}),b()}}(jQuery)},{}],10:[function(a,b){"use strict";b.exports=function(a){function b(){return c(),a("#ibox")}function c(){var b=a("#ibox");b.size()>0||(b=a('<div id="ibox"></div>'),b.hide(),a("body").prepend(b),a(window).unbind(".ibox").bind("keydown.ibox",function(a){27==a.keyCode&&d()}),b.bind("click.ibox",function(){d()}))}function d(){var b=a("#ibox");a("iframe",b).remove(),b.fadeOut(300,function(){a(this).remove()})}function e(){return a("#ibox").is(":visible")}function f(b){a.ajax({url:b,dataType:"html",type:"GET",data:{__:(new Date).getTime().toString()},success:function(a){g(a)},error:a.scalpel.ajax.processErrors})}function g(c){var e=a(c),f=a.Event("viewportUnload");if(a(window).trigger(f),!f.isDefaultPrevented()){var g=b().empty(),h=a('<div id="ibox-wrapper"></div>');h.append(e),g.append(h);var i=a('<div id="ibox-close"></div>');i.attr("title",a.msg.Close),h.append(i),g.fadeIn(300,function(){a("body").animate({scrollTop:g.offset().top},300),g.trigger("ibox_load"),a.scalpel.init(h),h.unbind(".ibox").bind("click.ibox",function(a){a.stopPropagation()}),a("a.close",e).add(i).bind("click.ibox",d)})}}return a.msg.Close="Close",{get:b,init:c,close:d,isVisible:e,show:g,load:f}}(jQuery)},{}],11:[function(){!function(a){a.fn.lookup=function(a){var b=this.find(a);return this.is(a)?b.add(this):b},a.fn.insertAt=function(a,b){var c=this.children().size();return 0>a&&(a=Math.max(0,c+1+a)),this.append(b),c>a&&this.children().eq(a).before(this.children().last()),this},a.fn.insertAtCaret=function(a){return this.each(function(){if(document.selection){this.focus();var b=document.selection.createRange();b.text=a,this.focus()}else if("undefined"!=typeof this.selectionStart){var c=this.selectionStart,d=this.selectionEnd,e=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(d,this.value.length),this.focus(),this.selectionStart=c+a.length,this.selectionEnd=c+a.length,this.scrollTop=e}else this.value+=a,this.focus()})},a.fn.scrollTo=function(){var b=-1;this.each(function(){b=a(this).offset().top}),b>=0&&a("html, body").animate({scrollTop:b},200)},a.fn.shuffle=function(){function b(a){return Math.floor(Math.random()*a)}var c=this.get(),d=a.map(c,function(){var d=b(c.length),e=a(c[d]).clone(!0)[0];return c.splice(d,1),e});return this.each(function(b){a(this).replaceWith(a(d[b]))}),a(d)}}(jQuery)},{}],12:[function(){!function(a){var b=8,c=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},d=function(a,b){return a>>>b|a<<32-b},e=function(a,b){return a>>>b},f=function(a,b,c){return a&b^~a&c},g=function(a,b,c){return a&b^a&c^b&c},h=function(a){return d(a,2)^d(a,13)^d(a,22)},i=function(a){return d(a,6)^d(a,11)^d(a,25)},j=function(a){return d(a,7)^d(a,18)^e(a,3)},k=function(a){return d(a,17)^d(a,19)^e(a,10)},l=function(a,b){var d,e,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var r=0;r<a.length;r+=16){d=w[0],e=w[1],l=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)x[s]=16>s?a[s+r]:c(c(c(k(x[s-2]),x[s-7]),j(x[s-15])),x[s-16]),t=c(c(c(c(q,i(n)),f(n,o,p)),v[s]),x[s]),u=c(h(d),g(d,e,l)),q=p,p=o,o=n,n=c(m,t),m=l,l=e,e=d,d=c(t,u);w[0]=c(d,w[0]),w[1]=c(e,w[1]),w[2]=c(l,w[2]),w[3]=c(m,w[3]),w[4]=c(n,w[4]),w[5]=c(o,w[5]),w[6]=c(p,w[6]),w[7]=c(q,w[7])}return w},m=function(a){for(var c=Array(),d=(1<<b)-1,e=0;e<a.length*b;e+=b)c[e>>5]|=(a.charCodeAt(e/b)&d)<<24-e%32;return c},n=function(a){for(var b="0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(15&a[d>>2]>>8*(3-d%4)+4)+b.charAt(15&a[d>>2]>>8*(3-d%4));return c},o=function(a,c){var d=m(a);d.length>16&&(d=core_sha1(d,a.length*b));for(var e=Array(16),f=Array(16),g=0;16>g;g++)e[g]=909522486^d[g],f[g]=1549556828^d[g];var h=l(e.concat(m(c)),512+c.length*b);return l(f.concat(h),768)},p=function(b){return b="object"==typeof b?a(b).val():b.toString()};a.extend({sha256:function(a){return a=p(a),n(l(m(a),a.length*b))},sha256hmac:function(a,b){return a=p(a),b=p(b),n(o(a,b))},sha256config:function(a){b=parseInt(a)||8}}),a.fn.sha256=function(b){a.sha256config(b);var c=p(a(this).val()),d=a.sha256(c);return a.sha256config(8),d}}(jQuery)},{}],13:[function(a,b){"use strict";a("./scalpel"),b.exports=function(a){function b(){var a=p["notices.timeout"];return a?parseInt(a):1e4}function c(){return a("#notices")}function d(){return a(".notice.error:not(:animated)",c()).size()>0}function e(){if(window.sessionStorage){var b=c();a(".notice:animated",b).remove(),window.sessionStorage.setItem("scalpel.notices",b.html()),b.empty()}return a.scalpel.notices}function f(){if(window.sessionStorage){var b=window.sessionStorage.getItem("scalpel.notices");b&&(c().append(b),window.sessionStorage.removeItem("scalpel.notices"),a(".notice",c()).each(function(){g(this)}))}return a.scalpel.notices}function g(c){var d=a(c);a(".hide",d).remove();var e=a("<span class='hide'/>");e.bind("click.scalpel.notices",function(){o(d)}),d.prepend(e),setTimeout(function(){o(d)},b())}function h(b){var c=b.kind,d=b.msg.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),e=a('<div class="notice '+c+'">'+d+"</div>");return g(e),e}function i(b){return c().append(h(b)),a.scalpel.notices}function j(a){return i({kind:"error",msg:a})}function k(a){return i({kind:"warn",msg:a})}function l(a){return i({kind:"info",msg:a})}function m(b){if(b&&b.notices)for(var c in b.notices){var d=b.notices[c];i(d)}return a.scalpel.notices}function n(){return o(a(".notice",c()))}function o(b){return b.fadeOut("fast",function(){a(this).remove()}),a.scalpel.notices}var p=a.scalpel.settings;return window.addEventListener("keydown",function(a){27==a.keyCode&&n()}),a(function(){f()}),{timeout:b,container:c,hasErrors:d,stash:e,unstash:f,initElem:g,mkElem:h,clear:n,dispose:o,add:i,addInfo:l,addWarn:k,addError:j,addAll:m}}(jQuery)},{"./scalpel":14}],14:[function(a,b){"use strict";b.exports={queue:{},init:function(a){$.each($.scalpel.queue,function(b,c){a.lookup(b).each(c)})},settings:{},msg:{},log:function(a){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(a)}}},{}],15:[function(a,b){"use strict";b.exports=function(a){function b(){var b=a.scalpel.settings["viewport.timeout"];return b?parseInt(b):500}function c(){var b=a.scalpel.settings["viewport.container"];return b?a(b):a("#viewport")}function d(){var a=c(),b=a.attr("data-viewport-id");if(b)return b;var d=Math.random().toString();return a.attr("data-viewport-id",d),d}function e(){var b=a('<div id="viewport-standby"></div>');return b.hide(),b.append('<div class="message">'+a.msg.standby+"</div>"),b}function f(f){var g=a.Event("viewportUnload");if(a(window).trigger(g),!g.isDefaultPrevented()){var i=e();a("body").append(i);var j=setTimeout(function(){i.fadeIn(300)},b());a.ajax({url:f,headers:{"X-Render-Mode":"partial-viewport"},dataType:"html",data:{__:(new Date).getTime().toString()},type:"GET",success:function(b){var e=d(),f=a(b);"viewport"!=f.attr("id")&&(f=a('<div id="viewport"/>').append(f)),f.attr("data-viewport-id",e),i.remove(),clearTimeout(j),c().replaceWith(f).remove(),a("a[rel='partial']").removeClass("active"),a.scalpel.init(f);var g=f.attr("data-title");g&&a("head title").text(g),a("body").trigger("viewportLoad"),h()},error:function(b){a.scalpel.ajax.processErrors(b),i.remove(),clearTimeout(j)}})}}function g(b,c){i?(window.history.replaceState({id:d()},"",location.href),c?window.history.replaceState({id:d()},"",b):window.history.pushState({id:d()},"",b),f(b)):(a.scalpel.notices.stash(),c?window.location.replace(b):window.location.href=b)}function h(){var b=location.href.replace(/.*?(?=#|$)/,""),c=a(b);0==c.size()&&(c=a(".viewport-anchor").first()),c.scrollTo()}a.msg.standby="Please wait...";var i="function"==typeof history.pushState;return i&&a(function(){window.addEventListener("popstate",function(a){if(a.state){var b=a.state.id;b&&b==d()?f(location.href):location.reload(!0)}},!1)}),i&&(a.scalpel.queue["a[rel='partial']"]=function(){var b=a(this);"popup"!=b.attr("rel")&&"_blank"!=b.attr("target")&&(b.addClass("partial-link"),b.unbind(".scalpel.partial-link").bind("click.scalpel.partial-link",function(b){if(0!=b.button||b.metaKey||b.ctrlKey)return!0;b.preventDefault();var c=a(this).attr("href");return g(c),!1}))}),{id:d,timeout:b,container:c,navigate:g,scrollToAnchor:h}}(jQuery)},{}]},{},[2]);